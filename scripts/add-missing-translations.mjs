/**
 * Script para a√±adir traducciones faltantes a los archivos de locale
 * Genera traducciones para CA, EN, FR bas√°ndose en los valores en espa√±ol
 */

import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Leer traducciones faltantes
const missingPath = path.join(__dirname, '..', 'missing_translations.json');
const missing = JSON.parse(fs.readFileSync(missingPath, 'utf-8'));

console.log(`üìù Procesando ${missing.length} traducciones faltantes...\n`);

// Funciones de traducci√≥n simplificadas (ES -> target)
// Nota: Para producci√≥n se usar√≠a una API de traducci√≥n real

const translations = {
  ca: {}, // Catal√°n
  en: {}, // Ingl√©s
  fr: {}, // Franc√©s
};

// Traducciones manuales de t√©rminos comunes
const commonTerms = {
  ca: {
    'Clases': 'Classes',
    'clases': 'classes',
    'clase': 'classe',
    'Clase': 'Classe',
    'baile': 'ball',
    'Baile': 'Ball',
    'bailar': 'ballar',
    'Bailar': 'Ballar',
    'bailarina': 'ballarina',
    'bailarinas': 'ballarines',
    'Barcelona': 'Barcelona',
    'profesor': 'professor',
    'profesora': 'professora',
    'profesores': 'professors',
    'academia': 'acad√®mia',
    'escuela': 'escola',
    'm√©todo': 'm√®tode',
    'M√©todo': 'M√®tode',
    'nivel': 'nivell',
    'niveles': 'nivells',
    't√©cnica': 't√®cnica',
    'm√∫sica': 'm√∫sica',
    'musicalidad': 'musicalitat',
    'reserva': 'reserva',
    'Reserva': 'Reserva',
    'horario': 'horari',
    'horarios': 'horaris',
    'precio': 'preu',
    'precios': 'preus',
    'cuota': 'quota',
    'cuotas': 'quotes',
    'inscripci√≥n': 'inscripci√≥',
    'primera': 'primera',
    'gratis': 'gratis',
    'prueba': 'prova',
    'semana': 'setmana',
    'mes': 'mes',
    'a√±o': 'any',
    'a√±os': 'anys',
    'grupo': 'grup',
    'grupos': 'grups',
    'alumna': 'alumna',
    'alumnas': 'alumnes',
    'brazos': 'bra√ßos',
    'caderas': 'malucs',
    'giros': 'girs',
    'tacones': 'talons',
    'elegancia': 'eleg√†ncia',
    'sensual': 'sensual',
    'feminidad': 'feminitat',
    'femenina': 'femenina',
    'femenino': 'femen√≠',
    'expresi√≥n': 'expressi√≥',
    'movimiento': 'moviment',
    'movimientos': 'moviments',
    'cuerpo': 'cos',
    'estilo': 'estil',
    '√∫nico': '√∫nic',
    '√∫nica': '√∫nica',
    'sistema': 'sistema',
    'progresivo': 'progressiu',
    'estructurado': 'estructurat',
    'confianza': 'confian√ßa',
    'seguridad': 'seguretat',
    'equilibrio': 'equilibri',
    'control': 'control',
    'dominio': 'domini',
    'pr√°ctica': 'pr√†ctica',
    'pr√°cticas': 'pr√†ctiques',
    'experiencia': 'experi√®ncia',
    'formaci√≥n': 'formaci√≥',
    'aprende': 'apr√®n',
    'aprender': 'aprendre',
    'ense√±anza': 'ensenyament',
    'claro': 'clar',
    'claros': 'clars',
    'objetivo': 'objectiu',
    'objetivos': 'objectius',
    'resultado': 'resultat',
    'resultados': 'resultats',
    'transformaci√≥n': 'transformaci√≥',
    'antes': 'abans',
    'despu√©s': 'despr√©s',
    'ahora': 'ara',
    'hoy': 'avui',
    'comunidad': 'comunitat',
    'familia': 'fam√≠lia',
    'eventos': 'esdeveniments',
    'internacional': 'internacional',
    'acreditada': 'acreditada',
    'reconocimiento': 'reconeixement',
    'permanencia': 'perman√®ncia',
    'sin': 'sense',
    'con': 'amb',
    'para': 'per a',
    'por': 'per',
    'qu√©': 'qu√®',
    'c√≥mo': 'com',
    'cu√°ndo': 'quan',
    'd√≥nde': 'on',
    'qui√©n': 'qui',
    'cubana': 'cubana',
    'cubano': 'cub√†',
    'aut√©ntica': 'aut√®ntica',
    'aut√©ntico': 'aut√®ntic',
    'verdad': 'veritat',
    'real': 'real',
    'instalaciones': 'instal¬∑lacions',
    'sala': 'sala',
    'salas': 'sales',
    'suelo': 'terra',
    'profesional': 'professional',
    'acceso': 'acc√©s',
    'beneficio': 'benefici',
    'beneficios': 'beneficis',
    'incluido': 'incl√≤s',
    'incluye': 'inclou',
    'socio': 'soci',
    'socios': 'socis',
    'actividad': 'activitat',
    'actividades': 'activitats',
    'Bachata': 'Bachata',
    'Salsa': 'Salsa',
    'Lady Style': 'Lady Style',
    'Dancehall': 'Dancehall',
    'Twerk': 'Twerk',
    'Hip Hop': 'Hip Hop',
    'Reggaeton': 'Reggaeton',
    'Afrobeat': 'Afrobeat',
    'WhatsApp': 'WhatsApp',
  },
  en: {
    'Clases': 'Classes',
    'clases': 'classes',
    'clase': 'class',
    'Clase': 'Class',
    'baile': 'dance',
    'Baile': 'Dance',
    'bailar': 'dance',
    'Bailar': 'Dance',
    'bailarina': 'dancer',
    'bailarinas': 'dancers',
    'Barcelona': 'Barcelona',
    'profesor': 'teacher',
    'profesora': 'teacher',
    'profesores': 'teachers',
    'academia': 'academy',
    'escuela': 'school',
    'm√©todo': 'method',
    'M√©todo': 'Method',
    'nivel': 'level',
    'niveles': 'levels',
    't√©cnica': 'technique',
    'm√∫sica': 'music',
    'musicalidad': 'musicality',
    'reserva': 'book',
    'Reserva': 'Book',
    'horario': 'schedule',
    'horarios': 'schedules',
    'precio': 'price',
    'precios': 'prices',
    'cuota': 'fee',
    'cuotas': 'fees',
    'inscripci√≥n': 'enrollment',
    'primera': 'first',
    'gratis': 'free',
    'prueba': 'trial',
    'semana': 'week',
    'mes': 'month',
    'a√±o': 'year',
    'a√±os': 'years',
    'grupo': 'group',
    'grupos': 'groups',
    'alumna': 'student',
    'alumnas': 'students',
    'brazos': 'arms',
    'caderas': 'hips',
    'giros': 'spins',
    'tacones': 'heels',
    'elegancia': 'elegance',
    'sensual': 'sensual',
    'feminidad': 'femininity',
    'femenina': 'feminine',
    'femenino': 'feminine',
    'expresi√≥n': 'expression',
    'movimiento': 'movement',
    'movimientos': 'movements',
    'cuerpo': 'body',
    'estilo': 'style',
    '√∫nico': 'unique',
    '√∫nica': 'unique',
    'sistema': 'system',
    'progresivo': 'progressive',
    'estructurado': 'structured',
    'confianza': 'confidence',
    'seguridad': 'security',
    'equilibrio': 'balance',
    'control': 'control',
    'dominio': 'mastery',
    'pr√°ctica': 'practice',
    'pr√°cticas': 'practices',
    'experiencia': 'experience',
    'formaci√≥n': 'training',
    'aprende': 'learn',
    'aprender': 'learn',
    'ense√±anza': 'teaching',
    'claro': 'clear',
    'claros': 'clear',
    'objetivo': 'objective',
    'objetivos': 'objectives',
    'resultado': 'result',
    'resultados': 'results',
    'transformaci√≥n': 'transformation',
    'antes': 'before',
    'despu√©s': 'after',
    'ahora': 'now',
    'hoy': 'today',
    'comunidad': 'community',
    'familia': 'family',
    'eventos': 'events',
    'internacional': 'international',
    'acreditada': 'accredited',
    'reconocimiento': 'recognition',
    'permanencia': 'commitment',
    'sin': 'without',
    'con': 'with',
    'para': 'for',
    'por': 'by',
    'qu√©': 'what',
    'c√≥mo': 'how',
    'cu√°ndo': 'when',
    'd√≥nde': 'where',
    'qui√©n': 'who',
    'cubana': 'Cuban',
    'cubano': 'Cuban',
    'aut√©ntica': 'authentic',
    'aut√©ntico': 'authentic',
    'verdad': 'truth',
    'real': 'real',
    'instalaciones': 'facilities',
    'sala': 'room',
    'salas': 'rooms',
    'suelo': 'floor',
    'profesional': 'professional',
    'acceso': 'access',
    'beneficio': 'benefit',
    'beneficios': 'benefits',
    'incluido': 'included',
    'incluye': 'includes',
    'socio': 'member',
    'socios': 'members',
    'actividad': 'activity',
    'actividades': 'activities',
  },
  fr: {
    'Clases': 'Cours',
    'clases': 'cours',
    'clase': 'cours',
    'Clase': 'Cours',
    'baile': 'danse',
    'Baile': 'Danse',
    'bailar': 'danser',
    'Bailar': 'Danser',
    'bailarina': 'danseuse',
    'bailarinas': 'danseuses',
    'Barcelona': 'Barcelone',
    'profesor': 'professeur',
    'profesora': 'professeure',
    'profesores': 'professeurs',
    'academia': 'acad√©mie',
    'escuela': '√©cole',
    'm√©todo': 'm√©thode',
    'M√©todo': 'M√©thode',
    'nivel': 'niveau',
    'niveles': 'niveaux',
    't√©cnica': 'technique',
    'm√∫sica': 'musique',
    'musicalidad': 'musicalit√©',
    'reserva': 'r√©serve',
    'Reserva': 'R√©serve',
    'horario': 'horaire',
    'horarios': 'horaires',
    'precio': 'prix',
    'precios': 'prix',
    'cuota': 'cotisation',
    'cuotas': 'cotisations',
    'inscripci√≥n': 'inscription',
    'primera': 'premi√®re',
    'gratis': 'gratuit',
    'prueba': 'essai',
    'semana': 'semaine',
    'mes': 'mois',
    'a√±o': 'ann√©e',
    'a√±os': 'ann√©es',
    'grupo': 'groupe',
    'grupos': 'groupes',
    'alumna': '√©l√®ve',
    'alumnas': '√©l√®ves',
    'brazos': 'bras',
    'caderas': 'hanches',
    'giros': 'tours',
    'tacones': 'talons',
    'elegancia': '√©l√©gance',
    'sensual': 'sensuel',
    'feminidad': 'f√©minit√©',
    'femenina': 'f√©minine',
    'femenino': 'f√©minin',
    'expresi√≥n': 'expression',
    'movimiento': 'mouvement',
    'movimientos': 'mouvements',
    'cuerpo': 'corps',
    'estilo': 'style',
    '√∫nico': 'unique',
    '√∫nica': 'unique',
    'sistema': 'syst√®me',
    'progresivo': 'progressif',
    'estructurado': 'structur√©',
    'confianza': 'confiance',
    'seguridad': 's√©curit√©',
    'equilibrio': '√©quilibre',
    'control': 'contr√¥le',
    'dominio': 'ma√Ætrise',
    'pr√°ctica': 'pratique',
    'pr√°cticas': 'pratiques',
    'experiencia': 'exp√©rience',
    'formaci√≥n': 'formation',
    'aprende': 'apprends',
    'aprender': 'apprendre',
    'ense√±anza': 'enseignement',
    'claro': 'clair',
    'claros': 'clairs',
    'objetivo': 'objectif',
    'objetivos': 'objectifs',
    'resultado': 'r√©sultat',
    'resultados': 'r√©sultats',
    'transformaci√≥n': 'transformation',
    'antes': 'avant',
    'despu√©s': 'apr√®s',
    'ahora': 'maintenant',
    'hoy': "aujourd'hui",
    'comunidad': 'communaut√©',
    'familia': 'famille',
    'eventos': '√©v√©nements',
    'internacional': 'international',
    'acreditada': 'accr√©dit√©e',
    'reconocimiento': 'reconnaissance',
    'permanencia': 'engagement',
    'sin': 'sans',
    'con': 'avec',
    'para': 'pour',
    'por': 'par',
    'qu√©': 'quoi',
    'c√≥mo': 'comment',
    'cu√°ndo': 'quand',
    'd√≥nde': 'o√π',
    'qui√©n': 'qui',
    'cubana': 'cubaine',
    'cubano': 'cubain',
    'aut√©ntica': 'authentique',
    'aut√©ntico': 'authentique',
    'verdad': 'v√©rit√©',
    'real': 'r√©el',
    'instalaciones': 'installations',
    'sala': 'salle',
    'salas': 'salles',
    'suelo': 'sol',
    'profesional': 'professionnel',
    'acceso': 'acc√®s',
    'beneficio': 'avantage',
    'beneficios': 'avantages',
    'incluido': 'inclus',
    'incluye': 'inclut',
    'socio': 'membre',
    'socios': 'membres',
    'actividad': 'activit√©',
    'actividades': 'activit√©s',
  },
};

// Funci√≥n para traducir texto simple usando los t√©rminos comunes
function translateSimple(text, lang) {
  if (!text || typeof text !== 'string') return text;

  let translated = text;
  const terms = commonTerms[lang] || {};

  // Reemplazar t√©rminos conocidos
  for (const [es, target] of Object.entries(terms)) {
    const regex = new RegExp(`\\b${es}\\b`, 'g');
    translated = translated.replace(regex, target);
  }

  return translated;
}

// Generar las traducciones
for (const item of missing) {
  const { key, value } = item;

  // Para catal√°n - m√°s similar al espa√±ol
  translations.ca[key] = translateSimple(value, 'ca');

  // Para ingl√©s
  translations.en[key] = translateSimple(value, 'en');

  // Para franc√©s
  translations.fr[key] = translateSimple(value, 'fr');
}

// Generar archivos de traducci√≥n parciales
const outputDir = path.join(__dirname, '..', 'i18n', 'generated');
if (!fs.existsSync(outputDir)) {
  fs.mkdirSync(outputDir, { recursive: true });
}

// Escribir traducciones generadas
for (const [lang, trans] of Object.entries(translations)) {
  const content = `// Auto-generated translations for ${lang.toUpperCase()}
// Review and merge into i18n/locales/${lang}.ts
// Generated: ${new Date().toISOString()}

export const generated_${lang} = ${JSON.stringify(trans, null, 2)};
`;

  const outPath = path.join(outputDir, `missing_${lang}.ts`);
  fs.writeFileSync(outPath, content, 'utf-8');
  console.log(`‚úÖ Generated: ${outPath}`);
}

console.log(`\nüìä Summary:`);
console.log(`   - Total keys: ${missing.length}`);
console.log(`   - Languages: CA, EN, FR`);
console.log(`   - Output: i18n/generated/`);
console.log(`\n‚ö†Ô∏è  IMPORTANTE: Estas traducciones son autom√°ticas y deben ser revisadas.`);
console.log(`   Para traducciones de calidad profesional, revisar manualmente o usar API de traducci√≥n.`);
